(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d7d2ea2"],{"0fd0":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[a("h4",[t._v("載入中 請稍候...")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"sm"},[a("router-link",{staticClass:"btn py-0 btn-sm border-dark float-right",attrs:{to:"/products/all"}},[t._v("回商品列表")]),a("h5",{staticClass:"my-3 text-left"},[t._v("商品內容")])],1),a("h4",{staticClass:"py-4 text-left lg md"},[t._v("商品內容")]),a("div",{staticClass:"row mb-3 media"},[a("img",{staticClass:"sm media-sm-img mb-3",attrs:{src:t.product.imageUrl,alt:t.product.title}}),a("img",{staticClass:"border ml-3 media-lg-img lg md col-md-6 align-self-center",attrs:{src:t.product.imageUrl,alt:t.product.title}}),a("div",{staticClass:"media-body px-3"},[a("div",{staticClass:"text-justify"},[a("h4",{staticClass:"text-dark"},[t._v(" "+t._s(t.product.title)+" "),"-NYXBMCKSLI9cZGSfPj4"===t.product.id?a("span",{staticClass:"badge badge-danger small"},[t._v(" 銷售冠軍 ")]):t._e()]),a("p",{staticClass:"text-dark"},[t._v(t._s(t.product.content))]),a("div",{staticClass:"input-group mb-2"},[t.isLiked?a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.liked(t.product.id)}}},[a("i",{staticClass:"fa fa-heart",attrs:{"aria-hidden":"true"}}),t._v(" 喜歡 ( 987 ) ")]):a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(e){return t.liked(t.product.id)}}},[a("i",{staticClass:"fa fa-heart-o",attrs:{"aria-hidden":"true"}}),t._v(" 喜歡 ( 986 ) ")])]),"-NYXBMCKSLI9cZGSfPj4"===t.product.id?a("div",{staticClass:"text-dark"},[t._v(" 已售出 9897 "+t._s(t.product.unit)+" | 剩餘數量 102 ")]):a("div",{staticClass:"text-dark"},[t._v(" 已售出 876 "+t._s(t.product.unit)+" | 剩餘數量 9999 ")]),a("hr"),a("div",{staticClass:"mt-2 mb-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"input-group p-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"num",e.target.multiple?a:a[0])}}},t._l(10,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" 選購 "+t._s(e)+" "+t._s(t.product.unit)+" ")])})),0),a("div",{staticClass:"input-group m-0 row"},[a("button",{staticClass:"btn border border-dark col-6 rounded-0",on:{click:function(e){return t.addCart(t.product.id,t.product.num)}}},[t._v(" 加入購物車 ")]),a("button",{staticClass:"btn btn-dark col-6 rounded-0",on:{click:function(e){return t.buyNow(t.product.id,t.product.num)}}},[t._v(" 立即購買 ")])])]),a("div",[t.product.price>0?a("h5",{staticClass:"text-right"},[a("del",{staticClass:"text-muted h6"},[t._v(" 原價 "+t._s(t.product.origin_price)+" 元 ")]),a("br"),a("h2",{staticClass:"float-right ml-2"},[a("b",{staticClass:"text-dark p-1"},[a("span",{staticClass:"small"},[t._v("現在只要")]),t._v(" "+t._s(t.product.price)+"元 ")])])]):a("h3",{staticClass:"text-right"},[a("b",[t._v("售價 "+t._s(t.product.origin_price)+" 元")])])])])]),a("div",{staticClass:"col-md-12 mt-2 text-left"},[a("h5",{staticClass:"bg-light text-dark p-2"},[t._v("商品描述：")]),a("pre",{staticClass:"m-3 text-dark",domProps:{innerHTML:t._s(t.product.description)}}),a("p",{staticClass:"mt-3 text-muted"},[t._v(" ***溫馨提醒：所有產品皆有提供七天鑑賞期*** ")])]),a("div",{staticClass:"col-md-12 mt-2"},[a("a",{staticClass:"float-right m-2 text-muted",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$router.push("/products/"+t.product.category)}}},[t._v(" 更多>> ")]),a("h5",{staticClass:"bg-light text-left text-dark p-2"},[t._v("類似商品：")]),a("div",{staticClass:"row text-dark"},t._l(t.products,(function(e){return a("div",{key:e.id,staticClass:"col-md-3 mb-4"},[a("div",{staticClass:"card border-0 shadow-sm",on:{click:function(a){return t.getProduct(e.id)}}},[a("div",{staticStyle:{height:"200px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+(e.imageUrl||e.image)+")"}}),a("div",{staticClass:"card-body"},[a("h5",[t._v(t._s(e.title))]),a("b",{staticClass:"h6 text-muted"},[t._v("優惠價 "+t._s(e.price)+"元")])])])])})),0)])])])])],1)},i=[],r=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("c975"),a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("1276"),a("498a"),a("159b"),a("ddb0"),a("2909")),n={data:function(){return{product:"",isLoading:!1,products:[],isLiked:!1,categories:[],cart:[],active:{name:"",path:""}}},methods:{getProducts:function(t){this.$router.push("/products/"+t)},delCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this;a.isLoading=!0;var s="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart/").concat(t);a.$http.delete(s).then((function(t){t.data.success?!1===e?a.$bus.$emit("message:push",t.data.message,"dark"):a.$bus.$emit("message:push","購物車清單已更新","dark"):a.$bus.$emit("message:push",t.data.message,"danger"),a.isLoading=!1,a.getCart()}))},getProduct:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route.params.id,e=this;e.isLoading=!0,e.$router.push("/product/"+t).catch((function(t){return t}));var a="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/product/").concat(t);e.$http.get(a).then((function(t){t.data.success?(e.product=t.data.product,e.product.num=1,e.active.name=e.product.category,e.filterProducts()):e.$bus.$emit("message:push",t.data.message,"danger")}))},filterProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/products/all");t.$http.get(e).then((function(e){if(t.isLoading=!1,e.data.success){var a=e.data.products.filter((function(e){return e.category===t.product.category}));a.forEach((function(e){t.products.length<4&&e.id!==t.product.id&&t.products.push(e)})),-1!==document.cookie.indexOf(t.$route.params.id)&&(t.isLiked=!0)}else t.$bus.$emit("message:push",e.data.message,"danger")}))},addCart:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this,i=s.cart.find((function(e){return e.product_id===t}));if(i){e={product_id:i.product_id,qty:a+i.qty},s.isLoading=!0;var r="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");s.$http.post(r,{data:e}).then((function(t){s.isLoading=!1,t.data.success?s.delCart(i.id,!0):s.$bus.$emit("message:push",t.data.message,"danger")}))}else{e={product_id:t,qty:a},s.isLoading=!0;var n="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");s.$http.post(n,{data:e}).then((function(t){s.isLoading=!1,t.data.success?(s.getCart(),s.$bus.$emit("message:push",t.data.message,"dark")):s.$bus.$emit("message:push",t.data.message,"danger")}))}},buyNow:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this,i=s.cart.find((function(e){return e.product_id===t}));i?(e={product_id:i.product_id,qty:a+i.qty},s.delCart(i.id,!0)):e={product_id:t,qty:a},s.isLoading=!0;var r="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");s.$http.post(r,{data:e}).then((function(t){s.isLoading=!1,t.data.success?(s.getCart(),s.$bus.$emit("message:push",t.data.message,"dark"),s.$router.push("/cart")):s.$bus.$emit("message:push",t.data.message,"danger")}))},liked:function(){for(var t,e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route.params.id,s=this,i=document.cookie.split(";"),r=0,n=i.length;r<n;++r)t=i[r].trim(),t=t.split("="),"like"===t[0]?(e=t[1],-1!==e.indexOf(a)?(e=e.split(","),e.length<=1?document.cookie="like=;expires=7;path=/":(e.splice(e.indexOf(a),1),document.cookie="like=".concat(e,";expires=7;path=/")),s.$bus.$emit("message:push","已移除喜好項目","danger"),s.isLiked=!1):-1===e.indexOf(a)&&(e=0!==e.length?e+","+a:a,document.cookie="like=".concat(e,";expires=7;path=/"),s.$bus.$emit("message:push","已加入喜好項目","dark"),s.isLiked=!0)):-1===document.cookie.indexOf("like")&&(document.cookie="like=".concat(a,";expires=7;path=/"),s.$bus.$emit("message:push","已加入喜好項目","dark"),s.isLiked=!0)},getCart:function(){var t=this;t.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");t.$http.get(e).then((function(e){e.data.success?t.cart=e.data.data.carts:t.$bus.$emit("message:push",e.data.message,"danger"),t.isLoading=!1}))}},created:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/products/all");t.$http.get(e).then((function(e){if(e.data.success){var a=e.data.products,s=new Set;a.filter((function(t){return!s.has(t.category)&&s.add(t.category)}));var i=Object(r["a"])(s);i.forEach((function(e){t.categories.push({title:e,num:0,path:""})})),t.categories.unshift({title:"全部",num:0,path:""});for(var n=[],c=function(a){var s=e.data.products.filter((function(e){return e.category===t.categories[a].title}));n.push(s.length)},o=1;o<t.categories.length;o++)c(o);n.unshift(a.length);for(var d=0;d<n.length;d++)t.categories[d].num=n[d];for(var u=t.categories,l=["all","Castorland","Clementoni","Ravensburger"],p=0;p<u.length;p++)u[p].path=l[p];t.categories=u}else t.$bus.$emit("message:push",e.data.message,"danger")})),t.getProduct(),t.getCart()}},c=n,o=(a("1598"),a("2877")),d=Object(o["a"])(c,s,i,!1,null,"3a30c4a4",null);e["default"]=d.exports},1276:function(t,e,a){"use strict";var s=a("d784"),i=a("44e7"),r=a("825a"),n=a("1d80"),c=a("4840"),o=a("8aa5"),d=a("50c4"),u=a("14c3"),l=a("9263"),p=a("d039"),h=[].push,g=Math.min,m=4294967295,v=!p((function(){return!RegExp(m,"y")}));s("split",2,(function(t,e,a){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var s=String(n(this)),r=void 0===a?m:a>>>0;if(0===r)return[];if(void 0===t)return[s];if(!i(t))return e.call(s,t,r);var c,o,d,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,v=new RegExp(t.source,p+"g");while(c=l.call(v,s)){if(o=v.lastIndex,o>g&&(u.push(s.slice(g,c.index)),c.length>1&&c.index<s.length&&h.apply(u,c.slice(1)),d=c[0].length,g=o,u.length>=r))break;v.lastIndex===c.index&&v.lastIndex++}return g===s.length?!d&&v.test("")||u.push(""):u.push(s.slice(g)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var i=n(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,i,a):s.call(String(i),e,a)},function(t,i){var n=a(s,t,this,i,s!==e);if(n.done)return n.value;var l=r(t),p=String(this),h=c(l,RegExp),f=l.unicode,b=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g"),x=new h(v?l:"^(?:"+l.source+")",b),C=void 0===i?m:i>>>0;if(0===C)return[];if(0===p.length)return null===u(x,p)?[p]:[];var k=0,_=0,$=[];while(_<p.length){x.lastIndex=v?_:0;var y,L=u(x,v?p:p.slice(_));if(null===L||(y=g(d(x.lastIndex+(v?0:_)),p.length))===k)_=o(p,_,f);else{if($.push(p.slice(k,_)),$.length===C)return $;for(var w=1;w<=L.length-1;w++)if($.push(L[w]),$.length===C)return $;_=k=y}}return $.push(p.slice(k)),$}]}),!v)},1598:function(t,e,a){"use strict";a("831a")},"44e7":function(t,e,a){var s=a("861d"),i=a("c6b6"),r=a("b622"),n=r("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==i(t))}},"498a":function(t,e,a){"use strict";var s=a("23e7"),i=a("58a8").trim,r=a("c8d2");s({target:"String",proto:!0,forced:r("trim")},{trim:function(){return i(this)}})},"831a":function(t,e,a){},c8d2:function(t,e,a){var s=a("d039"),i=a("5899"),r="​᠎";t.exports=function(t){return s((function(){return!!i[t]()||r[t]()!=r||i[t].name!==t}))}},c975:function(t,e,a){"use strict";var s=a("23e7"),i=a("4d64").indexOf,r=a("a640"),n=a("ae40"),c=[].indexOf,o=!!c&&1/[1].indexOf(1,-0)<0,d=r("indexOf"),u=n("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:o||!d||!u},{indexOf:function(t){return o?c.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-6d7d2ea2.73217e6d.js.map