(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-064f1931"],{2355:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[s("h4",[t._v("載入中 請稍候...")])]),s("div",{staticClass:"lg row"},[s("div",{staticClass:"col-lg-7 mb-3",class:{"col-lg-8":t.cart.total>0}},[t._m(0),t.cart.total>0?s("div",[s("table",{staticClass:"table table-striped table-bordered text-dark"},[t._m(1),s("tbody",t._l(t.cart.carts,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.delCart(a.id)}}},[s("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])]),s("td",{staticClass:"align-middle"},[s("u",[s("router-link",{staticClass:"text-muted",attrs:{to:"/product/"+a.product.id}},[t._v(" "+t._s(a.product.title)+" ")])],1),t.finalTotal!==t.total?s("div",{staticClass:"text-muted"},[t._v(" 已套用優惠券 ")]):t._e()]),s("td",{staticClass:"align-middle"},[s("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.lessQty(a.id)}}},[t._v(" ﹣ ")]),s("button",{staticClass:"btn btn-outline-secondary",attrs:{disabled:""}},[t._v(" "+t._s(a.qty)+" ")]),s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.addQty(a.id)}}},[t._v(" ﹢ ")])])]),s("td",{staticClass:"align-middle text-right"},[t.finalTotal!==t.total?s("del",{staticClass:"text-muted"},[t._v(" "+t._s(t._f("dollarSign")(t._f("numFormat")(a.product.price)))+" / "+t._s(a.product.unit)+" ")]):[t._v(" "+t._s(t._f("dollarSign")(t._f("numFormat")(a.product.price)))+" / "+t._s(a.product.unit)+" ")],t.finalTotal!==t.total?s("div",{staticClass:"text-dark"},[t._v(" 折扣後 "+t._s(t._f("dollarSign")(t._f("numFormat")(a.product.price*t.cart.carts[0].coupon.percent/100)))+" ")]):t._e()],2)])})),0)]),s("div",{staticClass:"input-group input-group-sm w-50"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.hint},domProps:{value:t.couponCode},on:{input:function(a){a.target.composing||(t.couponCode=a.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-secondary font-weight-bold",attrs:{type:"button"},on:{click:t.addCoupon}},[t._v(" 套用優惠碼 ")])])])]):t._e(),0===t.cart.total?s("div",[s("p",{staticClass:"lead mt-5"},[t._v(" 您的購物車沒有任何商品， "),s("router-link",{staticClass:"text-muted",attrs:{to:"/products/all"}},[t._v(" 回商品列表 ")]),t._v(" 選購。 ")],1)]):t._e()]),t.cart.total>0?s("div",{staticClass:"col-lg-4 col-md-6 mt-md-5 mt-lg-0 mx-auto"},[t._m(2),s("div",{staticClass:"border p-3"},[s("h6",[s("div",{staticClass:"float-left"},[t._v("小計：")]),s("div",{staticClass:"float-right"},[t._v("NT$ "+t._s(t.total))])]),t._m(3),s("h4",{staticClass:"mt-5 border-top py-3",class:{"h5 text-secondary":t.finalTotal!==t.total}},[s("div",{staticClass:"float-left"},[t._v("總計")]),s("div",{staticClass:"float-right"},[t._v(t._s(t._f("dollarSign")(t._f("numFormat")(t.total))))])]),t.finalTotal!==t.total?s("h4",{staticClass:"py-3 text-dark"},[s("div",{staticClass:"float-left"},[t._v("最終折扣價")]),s("div",{staticClass:"float-right"},[t._v(" "+t._s(t._f("dollarSign")(t._f("numFormat")(t.finalTotal)))+" ")])]):t._e(),s("button",{staticClass:"btn w-100 mt-2 btn-outline-danger font-weight-bold",on:{click:t.goCheckout}},[t._v(" 確認結帳 ")])])]):t._e(),0===t.cart.total?s("div",{staticClass:"col-lg-5 col-md-8 mx-auto"},[t._m(4),s("ul",{staticClass:"list-unstyled my-4"},t._l(t.randoms,(function(a){return s("li",{key:a.id,staticClass:"media p-2 border mb-1",on:{click:function(s){return t.$router.push("/product/"+a.id)}}},[s("img",{staticClass:"align-self-center media-img",attrs:{alt:a.title,src:a.imageUrl}}),s("div",{staticClass:"media-body ml-3 text-left align-self-center"},[s("h6",{staticClass:"mt-2 mb-1"},[t._v(t._s(a.title))]),t._v(" "+t._s(a.content)+" "),s("div",{staticClass:"border-top pt-2 mt-2"},[a.price>0?[s("del",{staticClass:"float-left text-muted"},[s("small",[t._v("原價 "+t._s(a.origin_price)+" 元")])]),s("h4",{staticClass:"ml-2 mb-0 float-right"},[s("b",{staticClass:"text-dark p-1"},[t._v(t._s(a.price)+"元")])])]:[s("small",{staticClass:"float-left"},[t._v("售價")]),s("h4",{staticClass:"ml-2 mb-0 float-right"},[s("b",{staticClass:"text-dark p-1"},[t._v(t._s(a.origin_price)+"元")])])]],2)])])})),0)]):t._e()]),t.cart.total>0?s("div",{staticClass:"sm"},[t._m(5),s("table",{staticClass:"table table-striped table-bordered text-dark mt-4"},[t._m(6),t._l(t.cart.carts,(function(a){return s("tbody",{key:a.id},[s("tr",[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.delCart(a.id)}}},[s("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])]),s("td",{staticClass:"text-center"},[s("div",{staticClass:"float-left"},[t._v(" "+t._s(a.product.title)+" × "+t._s(a.qty)+" ")]),s("div",{staticClass:"float-right"},[t.cart.final_total!==t.cart.total?s("del",{staticClass:"text-muted"},[t._v(" "+t._s(t._f("dollarSign")(t._f("numFormat")(a.total)))+" ")]):[t._v(" "+t._s(t._f("dollarSign")(t._f("numFormat")(a.total)))+" ")],t.cart.final_total!==t.cart.total?s("div",{staticClass:"text-dark"},[t._v(" 折扣後 "+t._s(t._f("dollarSign")(t._f("numFormat")(a.final_total)))+" ")]):t._e()],2),s("br"),t.cart.final_total!==t.cart.total?s("div",{staticClass:"text-muted"},[t._v(" 已套用優惠券 ")]):t._e()])])])})),s("tfoot",[s("tr",[s("td",{staticClass:"text-right"},[t._v("總計")]),s("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v(" "+t._s(t._f("dollarSign")(t._f("numFormat")(t.cart.total)))+" ")])]),t.cart.final_total!==t.cart.total?s("tr",[s("td",{staticClass:"pl-0 text-right"},[t._v("應付金額")]),s("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("dollarSign")(t._f("numFormat")(t.cart.final_total)))+" ")])]):t._e()])],2),t._m(7),s("div",{staticClass:"input-group input-group-sm p-0"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control text-center",attrs:{type:"text",placeholder:t.hint},domProps:{value:t.couponCode},on:{input:function(a){a.target.composing||(t.couponCode=a.target.value)}}}),s("button",{staticClass:"btn border border-dark rounded-0 btn-sm font-weight-bold",attrs:{type:"button"},on:{click:t.addCoupon}},[t._v(" 套用優惠碼 ")])]),s("button",{staticClass:"btn btn-dark w-100 btn-sm my-4 font-weight-bold",on:{click:t.goCheckout}},[t._v(" 立即結帳 ")]),s("br")]):t._e(),0===t.cart.total?s("div",{staticClass:"sm"},[t._m(8),s("p",{staticClass:"lead"},[t._v(" 您的購物車目前沒有任何商品， "),s("br"),t._v("請 "),s("router-link",{staticClass:"text-muted mr-1",attrs:{to:"/products/all"}},[t._v(" 回商品列表 ")]),t._v(" 選購。 ")],1),s("hr"),t._m(9),s("ul",{staticClass:"list-unstyled my-4"},t._l(t.randoms,(function(a){return s("li",{key:a.id,staticClass:"media p-2 border mb-1",on:{click:function(s){return t.$router.push("/product/"+a.id)}}},[s("img",{staticClass:"align-self-center media-img",attrs:{alt:a.title,src:a.imageUrl}}),s("div",{staticClass:"media-body ml-1 text-left align-self-center"},[s("h6",{staticClass:"mt-2 mb-1"},[t._v(t._s(a.title))]),t._v(" "+t._s(a.content)+" "),s("div",{staticClass:"border-top pt-2 mt-2"},[a.price>0?[s("del",{staticClass:"float-left text-muted"},[s("small",[t._v("原價 "+t._s(a.origin_price)+" 元")])]),s("h4",{staticClass:"ml-2 mb-0 float-right"},[s("b",{staticClass:"text-dark p-1"},[t._v(t._s(a.price)+"元")])])]:[s("small",{staticClass:"float-left"},[t._v("售價")]),s("h4",{staticClass:"ml-2 mb-0 float-right"},[s("b",{staticClass:"text-dark p-1"},[t._v(t._s(a.origin_price)+"元")])])]],2)])])})),0),s("div",{staticClass:"row mini text-dark"},t._l(t.randoms,(function(a){return s("div",{key:a.id,staticClass:"col-md p-2"},[s("div",{staticClass:"card border-0 shadow-sm"},[s("div",{staticStyle:{height:"200px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+(a.imageUrl||a.image)+")"}}),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(" "+t._s(a.title)+" "),s("br"),s("small",[s("span",{staticClass:"badge badge-dark p-1"},[t._v(t._s(a.category))])])]),s("p",{staticClass:"card-text"},[t._v(t._s(a.content))]),s("div",[a.price?t._e():s("div",{staticClass:"h5"},[t._v(" "+t._s(a.origin_price)+" 元 ")]),a.price?s("del",{staticClass:"text-muted"},[t._v(" 原價 "+t._s(a.origin_price)+" 元 ")]):t._e(),a.price?s("div",{staticClass:"h5 text-dark"},[t._v(" 現在只要 "+t._s(a.price)+" 元 ")]):t._e()])]),s("div",{staticClass:"card-footer d-flex"},[s("button",{staticClass:"btn border border-dark btn-sm",attrs:{type:"button"},on:{click:function(s){return t.$router.push("/product/"+a.id)}}},[t._v(" 查看更多 ")]),s("button",{staticClass:"btn btn-dark btn-sm ml-auto",attrs:{type:"button"},on:{click:function(s){return t.addCart(a.id)}}},[t._v(" 加到購物車 ")])])])])})),0)]):t._e(),s("div",{staticClass:"modal fade",attrs:{id:"modal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[t._m(10),s("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(a){var e=a.invalid;return[s("form",{staticClass:"text-dark text-left",on:{submit:function(a){return a.preventDefault(),t.addOrder(a)}}},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row justify-content-center mx-3"},[s("span",{staticClass:"text-danger my-2"},[t._v("* 為必填項目")]),s("div",{staticClass:"col-md-12 my-2"},[s("div",{staticClass:"form-group"},[s("ValidationProvider",{attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.failed,r=a.errors;return[s("label",{attrs:{for:"useremail"}},[t._v(" 電子信箱 "),s("i",{staticClass:"text-danger"},[t._v("*")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control form-control-sm",class:{"is-invalid":e},attrs:{type:"text",name:"email",id:"useremail",placeholder:"請輸入收件人電子郵件"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),e?s("span",{staticClass:"text-danger"},[t._v(" "+t._s(r[0])+" ")]):t._e()]}}],null,!0)})],1),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-5"},[s("ValidationProvider",{attrs:{name:"name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.failed,r=a.errors;return[s("label",{attrs:{for:"username"}},[t._v(" 姓名 "),s("i",{staticClass:"text-danger"},[t._v("*")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control form-control-sm",class:{"is-invalid":e},attrs:{type:"text",name:"name",id:"username",placeholder:"請輸入收件人姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),e?s("span",{staticClass:"text-danger"},[t._v(" "+t._s(r[0])+" ")]):t._e()]}}],null,!0)})],1),s("div",{staticClass:"form-group col-md-7"},[s("ValidationProvider",{attrs:{name:"mobile",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.failed,r=a.errors;return[s("label",{attrs:{for:"usertel"}},[t._v(" 電話號碼 "),s("i",{staticClass:"text-danger"},[t._v("*")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control form-control-sm",class:{"is-invalid":e},attrs:{type:"text",name:"mobile",id:"usertel",placeholder:"請輸入收件人聯絡電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),e?s("span",{staticClass:"text-danger"},[t._v(" "+t._s(r[0])+" ")]):t._e()]}}],null,!0)})],1)]),s("div",{staticClass:"form-group"},[s("ValidationProvider",{attrs:{name:"address",rules:"required|min:3"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.failed,r=a.errors;return[s("label",{attrs:{for:"useraddress"}},[t._v(" 收件地址 "),s("i",{staticClass:"text-danger"},[t._v("*")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control form-control-sm",class:{"is-invalid":e},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入收件人地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),e?s("span",{staticClass:"text-danger"},[t._v(" "+t._s(r[0])+" ")]):t._e()]}}],null,!0)})],1),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"message"}},[t._v("備註")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control form-control-sm",attrs:{name:"message",id:"message",cols:"30",rows:"4",placeholder:"商品備註"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),s("div",{staticClass:"text-right"})])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),s("button",{staticClass:"btn btn-dark",attrs:{disabled:e}},[t._v(" 資料送出 ")])])])]}}])})],1)])])],1)},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h4",{staticClass:"my-4 text-dark"},[s("i",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true"}}),t._v(" 購物車清單 ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",{staticClass:"thead"},[s("th",[t._v("操作")]),s("th",[t._v("商品連結")]),s("th",[t._v("數量")]),s("th",[t._v("單價")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h4",{staticClass:"my-4"},[s("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" 訂單摘要 ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h6",{staticClass:"py-4"},[s("div",{staticClass:"float-left"},[t._v("運費：")]),s("del",{staticClass:"float-right text-muted"},[t._v("NT$ 200")]),s("span",{staticClass:"float-right mr-2 text-danger"},[t._v("免運活動")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h4",{staticClass:"my-4 lg"},[s("i",{staticClass:"fa fa-star",attrs:{"aria-hidden":"true"}}),t._v(" 為您推薦 ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h5",{staticClass:"my-4"},[s("i",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true"}}),t._v(" 購物車清單 ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",{staticClass:"thead"},[s("th",{attrs:{width:"80"}},[t._v("操作")]),s("th",{attrs:{colspan:"2"}},[t._v("購買清單")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h5",[s("i",{staticClass:"fa fa-ticket",attrs:{"aria-hidden":"true"}}),t._v(" 優惠券 ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h5",{staticClass:"my-4"},[s("i",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true"}}),t._v(" 購物車清單 ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h5",{staticClass:"my-4 sm"},[s("i",{staticClass:"fa fa-star",attrs:{"aria-hidden":"true"}}),t._v(" 為您推薦 ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header bg-dark text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[s("span",[t._v("填寫收件資料")])]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"text-light",attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],i=(s("99af"),s("4de4"),s("4160"),s("a434"),s("159b"),s("1157")),o=s.n(i),l={data:function(){return{isLoading:!1,cart:[],couponCode:"",hint:"請輸入優惠碼",randoms:[],tempCart:[],orderId:"",form:{user:{address:"",email:"",name:"",tel:""},message:""}}},methods:{getCart:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this;a.isLoading=!0;var s="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");a.$http.get(s).then((function(s){s.data.success?(a.cart=s.data.data,0===a.cart.total?a.getProducts():a.cart.final_total===a.cart.total&&a.cart.total>0?a.hint="請輸入優惠碼":a.cart.final_total!==a.cart.total&&a.cart.total>0&&(a.hint="當前折扣碼："+a.cart.carts[0].coupon.code)):a.$bus.$emit("message:push",s.data.message,"danger"),a.isLoading=!1,!0===t&&o()("#modal").modal("show")}))},delCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this;s.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart/").concat(t);s.$http.delete(e).then((function(t){t.data.success?!1===a&&s.$bus.$emit("message:push",t.data.message,"dark"):s.$bus.$emit("message:push",t.data.message,"danger"),s.isLoading=!1,s.getCart()}))},addCoupon:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=this;if(""!==a.couponCode)if(!1===t){a.isLoading=!0;var s="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/coupon");a.$http.post(s,{data:{code:a.couponCode}}).then((function(s){s.data.success?(a.cart.final_total=s.data.final_total,a.$bus.$emit("message:push","已套用優惠券","dark"),!0===t&&(a.isLoading=!1)):a.$bus.$emit("message:push",s.data.message,"danger"),a.getCart(!0)}))}else{a.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/coupon");a.$http.post(e,{data:{code:a.couponCode}}).then((function(s){s.data.success?(a.cart.final_total=s.data.final_total,a.$bus.$emit("message:push","已套用優惠券","dark"),!0===t&&(a.isLoading=!1)):a.$bus.$emit("message:push",s.data.message,"danger"),a.getCart()}))}else a.$bus.$emit("message:push","請輸入優惠碼","danger")},addQty:function(t){var a=this;a.cart.carts.forEach((function(a){a.id===t&&(a.qty=a.qty+1)}))},lessQty:function(t){var a=this;a.cart.carts.forEach((function(s){s.id===t&&(1===s.qty?a.delCart(t):s.qty=s.qty-1)}))},goCheckout:function(){var t=this;if(JSON.stringify(t.cart)===JSON.stringify(t.tempCart))o()("#modal").modal("show");else{t.isLoading=!0,t.tempCart.carts=t.cart.carts;var a="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");t.$http.get(a).then((function(a){if(a.data.success){t.cart=a.data.data;var s=t.cart.carts.length;t.cart.carts.forEach((function(a){s--;var e="";t.cart.carts[0].coupon&&(e=t.cart.carts[0].coupon.code);var r="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart/").concat(a.id);if(t.$http.delete(r).then(),0===s){var i="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart"),o=t.tempCart.carts.length;t.tempCart.carts.forEach((function(a){var s={product_id:a.product_id,qty:a.qty};t.$http.post(i,{data:s}).then((function(a){if(a.data.success){o--;var s="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");t.$http.get(s).then((function(a){a.data.success&&(t.cart=a.data.data,t.tempCart=t.cart,""!==e?(t.couponCode=e,0===o&&(t.addCoupon(!1),t.isLoading=!1)):t.getCart(!0))}))}}))})),t.$bus.$emit("message:push","購物車清單已更新","dark")}}))}else t.$bus.$emit("message:push",a.data.message,"danger")}))}},getProducts:function(){var t=this;t.isLoading=!0;var a="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/products/all");t.$http.get(a).then((function(a){if(t.isLoading=!1,a.data.success){t.randoms=[];for(var s=a.data.products.filter((function(t){return 1===t.is_enabled})),e=s,r=4,i=0;i<r;i++){var o=Math.floor(Math.random()*e.length);t.randoms.push(e.splice(o,1)[0])}}else t.$bus.$emit("message:push",a.data.message,"danger")}))},addOrder:function(){var t=this;t.isLoading=!0;var a="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/order");t.$refs.form.validate().then((function(s){s?t.$http.post(a,{data:t.form}).then((function(a){a.data.success?(o()("#modal").modal("hide"),t.$router.push("/checkout/".concat(a.data.orderId)),t.$bus.$emit("message:push",a.data.message,"dark")):t.$bus.$emit("message:push",a.data.message,"danger")})):t.$bus.$emit("message:push","欄位不完整","danger"),t.isLoading=!1}))}},computed:{total:function(){var t=this,a=0;return t.cart.carts.forEach((function(t){a+=t.qty*t.product.price})),a},finalTotal:function(){var t=this,a=0;return t.cart.carts[0].coupon?t.cart.carts.forEach((function(s){a+=s.qty*s.product.price*t.cart.carts[0].coupon.percent/100})):t.cart.carts.forEach((function(t){a+=t.qty*t.product.price})),a}},created:function(){var t=this;t.isLoading=!0;var a="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");t.$http.get(a).then((function(a){a.data.success&&(t.tempCart=a.data.data)})),t.getCart()}},n=l,c=(s("952a"),s("2877")),d=Object(c["a"])(n,e,r,!1,null,"11f935da",null);a["default"]=d.exports},"952a":function(t,a,s){"use strict";s("aa0d")},aa0d:function(t,a,s){}}]);
//# sourceMappingURL=chunk-064f1931.cd6b45f8.js.map