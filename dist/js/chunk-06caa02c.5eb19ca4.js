(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06caa02c"],{1799:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation"}},[e("ul",{staticClass:"pagination justify-content-center"},[e("li",{staticClass:"page-item",class:{disabled:!t.pages.has_pre}},[e("a",{staticClass:"page-link text-secondary",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getPages(t.pages.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item"},[e("a",{staticClass:"page-link text-secondary",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getPages(a)}}},[t._v(" "+t._s(a)+" ")])])})),e("li",{staticClass:"page-item",class:{disabled:!t.pages.has_next}},[e("a",{staticClass:"page-link text-secondary",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getPages(t.pages.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},i=[],n={data:function(){return{}},props:["pages"],methods:{getPages:function(t){this.$emit("event",t)}}},c=n,r=e("2877"),o=Object(r["a"])(c,s,i,!1,null,null,null);a["a"]=o.exports},"355a":function(t,a,e){},"81b1":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[e("h4",[t._v("載入中 請稍候...")])]),e("div",{staticClass:"row mb-3"},[e("CategoryList",{staticClass:"lg col-lg-3",attrs:{categories:t.categories,active:t.active},on:{getProducts:t.getProducts}}),e("div",{staticClass:"col-lg-9"},[e("h4",{staticClass:"my-lg-4 mt-4 text-left"},[t._v("商品列表")]),e("div",{staticClass:"dropdown sm md"},[t._v(" 當前商品類別： "),e("button",{staticClass:"btn btn-sm border-dark mb-1 dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.active.name)+" ")]),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},t._l(t.categories,(function(a){return e("a",{key:a.title,staticClass:"dropdown-item",class:{active:a.title===t.active.name},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getProducts(a.path)}}},[t._v(" "+t._s(a.title)+" ")])})),0)]),e("div",{staticClass:"row"},t._l(t.products,(function(a){return e("div",{key:a.id,staticClass:"col-md-4"},[e("div",{staticClass:"card my-2",on:{click:function(e){return t.$router.push("/product/"+a.id)}}},[e("div",{staticClass:"card-img",style:{backgroundImage:"url("+(a.imageUrl||a.image)+")"}}),e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(" "+t._s(a.title)+" "),e("br"),e("small",[e("span",{staticClass:"badge badge-secondary"},[t._v(" "+t._s(a.category)+" ")])])]),t._v(" "+t._s(a.content)+" "),e("div",{staticClass:"mt-2"},[a.price?t._e():e("div",{staticClass:"h5"},[t._v(" "+t._s(a.origin_price)+" 元 ")]),a.price?e("del",{staticClass:"text-muted"},[t._v(" 原價 "+t._s(a.origin_price)+" 元 ")]):t._e(),a.price?e("div",{staticClass:"h5"},[t._v(" 現在只要 "+t._s(a.price)+" 元 ")]):t._e()])])])])})),0),"all"===t.active.path?e("Pagination",{attrs:{pages:t.pagination},on:{event:t.getPage}}):t._e()],1)],1)],1)},i=[],n=(e("99af"),e("4de4"),e("4160"),e("b0c0"),e("d3b7"),e("6062"),e("3ca3"),e("159b"),e("ddb0"),e("2909")),c=e("1799"),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-md pr-0"},[e("h4",{staticClass:"my-4 text-left lg"},[t._v("商品分類")]),e("ul",{staticClass:"p-0 m-0"},t._l(t.categories,(function(a){return e("li",{key:a.title,staticClass:"list-group-item d-flex justify-content-between align-items-center",class:{"bg-secondary text-light":a.title===t.active.name},on:{click:function(e){return t.getProducts(a.path)}}},[t._v(" "+t._s(a.title)+" "),e("span",{staticClass:"badge badge-secondary badge-pill"},[t._v(t._s(a.num))])])})),0)])},o=[],l={data:function(){return{}},props:["categories","active"],methods:{getProducts:function(t){this.$emit("getProducts",t)}}},u=l,d=e("2877"),g=Object(d["a"])(u,r,o,!1,null,null,null),p=g.exports,h={data:function(){return{isLoading:!1,products:[],categories:[],active:{name:"",path:""},pagination:{}}},components:{Pagination:c["a"],CategoryList:p},watch:{products:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route.params.category,a=this;a.isLoading=!0,a.$router.push("/products/"+t).catch((function(t){return t})),a.active.path=t;var e="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/products/all");a.$http.get(e).then((function(e){e.data.success?"all"===t?(a.getPage(),a.active.name="全部"):(a.products=e.data.products.filter((function(a){return a.category===t})),a.active.name=t):a.$bus.$emit("message:push",e.data.message,"danger"),a.isLoading=!1}))},getPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this;a.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/products?page=").concat(t);a.$http.get(e).then((function(t){a.isLoading=!1,t.data.success?(a.products=t.data.products,a.pagination=t.data.pagination):a.$bus.$emit("message:push",t.data.message,"danger")}))},getProduct:function(t){this.$router.push("/product/".concat(t.id))},getCategory:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/products/all");t.$http.get(a).then((function(a){if(a.data.success){var e=a.data.products,s=new Set;e.filter((function(t){return!s.has(t.category)&&s.add(t.category)}));var i=Object(n["a"])(s);i.forEach((function(a){t.categories.push({title:a,num:0,path:""})})),t.categories.unshift({title:"全部",num:0,path:""});for(var c=[],r=function(e){var s=a.data.products.filter((function(a){return a.category===t.categories[e].title}));c.push(s.length)},o=1;o<t.categories.length;o++)r(o);c.unshift(e.length);for(var l=0;l<c.length;l++)t.categories[l].num=c[l];for(var u=["all","Castorland","Clementoni","Ravensburger"],d=0;d<t.categories.length;d++)t.categories[d].path=u[d];t.getProducts()}else t.$bus.$emit("message:push",a.data.message,"danger")}))}},created:function(){this.getCategory(),this.getProducts(),this.getPage(1)}},v=h,f=(e("d417"),Object(d["a"])(v,s,i,!1,null,"5b6209de",null));a["default"]=f.exports},d417:function(t,a,e){"use strict";e("355a")}}]);
//# sourceMappingURL=chunk-06caa02c.5eb19ca4.js.map