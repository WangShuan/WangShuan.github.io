(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15bc8c99"],{1276:function(t,a,e){"use strict";var i=e("d784"),s=e("44e7"),n=e("825a"),r=e("1d80"),c=e("4840"),o=e("8aa5"),d=e("50c4"),u=e("14c3"),l=e("9263"),h=e("d039"),p=[].push,g=Math.min,f=4294967295,v=!h((function(){return!RegExp(f,"y")}));i("split",2,(function(t,a,e){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=String(r(this)),n=void 0===e?f:e>>>0;if(0===n)return[];if(void 0===t)return[i];if(!s(t))return a.call(i,t,n);var c,o,d,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,v=new RegExp(t.source,h+"g");while(c=l.call(v,i)){if(o=v.lastIndex,o>g&&(u.push(i.slice(g,c.index)),c.length>1&&c.index<i.length&&p.apply(u,c.slice(1)),d=c[0].length,g=o,u.length>=n))break;v.lastIndex===c.index&&v.lastIndex++}return g===i.length?!d&&v.test("")||u.push(""):u.push(i.slice(g)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,e){var s=r(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,s,e):i.call(String(s),a,e)},function(t,s){var r=e(i,t,this,s,i!==a);if(r.done)return r.value;var l=n(t),h=String(this),p=c(l,RegExp),m=l.unicode,b=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g"),k=new p(v?l:"^(?:"+l.source+")",b),_=void 0===s?f:s>>>0;if(0===_)return[];if(0===h.length)return null===u(k,h)?[h]:[];var x=0,C=0,$=[];while(C<h.length){k.lastIndex=v?C:0;var L,y=u(k,v?h:h.slice(C));if(null===y||(L=g(d(k.lastIndex+(v?0:C)),h.length))===x)C=o(h,C,m);else{if($.push(h.slice(x,C)),$.length===_)return $;for(var w=1;w<=y.length-1;w++)if($.push(y[w]),$.length===_)return $;C=x=L}}return $.push(h.slice(x)),$}]}),!v)},"44e7":function(t,a,e){var i=e("861d"),s=e("c6b6"),n=e("b622"),r=n("match");t.exports=function(t){var a;return i(t)&&(void 0!==(a=t[r])?!!a:"RegExp"==s(t))}},"498a":function(t,a,e){"use strict";var i=e("23e7"),s=e("58a8").trim,n=e("c8d2");i({target:"String",proto:!0,forced:n("trim")},{trim:function(){return s(this)}})},b618:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[e("h4",[t._v("載入中 請稍候...")])]),t._m(0),0==t.hasLiked?e("div",[e("h4",{staticClass:"my-5"},[t._v(" 您的喜好項目為空， "),e("br"),t._v(" 將在 "),t.time>=0?e("span",{staticClass:"h3 text-danger"},[t._v(" "+t._s(t.time)+" ")]):t._e(),t._v(" 秒後跳轉回商品列表 ")])]):e("div",{attrs:{id:"cart-list"}},[e("table",{staticClass:"lg table table-striped table-bordered text-dark mt-4"},[t._m(1),e("tbody",t._l(t.products,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger mr-2 btn-sm",attrs:{type:"button"},on:{click:function(e){return t.removeLike(a.id)}}},[e("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}}),t._v(" 取消收藏 ")]),e("button",{staticClass:"btn-outline-dark btn-sm btn",attrs:{type:"button"},on:{click:function(e){return t.addCart(a.id)}}},[t._v(" 加入購物車 "),e("i",{staticClass:"fa fa-shopping-basket",attrs:{"aria-hidden":"true"}})])]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.title))]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(t._f("dollarSign")(t._f("numFormat")(a.price)))+" / "+t._s(a.unit)+" ")]),e("td",{staticClass:"align-middle"},[e("router-link",{staticClass:"text-secondary",attrs:{to:"/product/"+a.id}},[t._v(" 查看更多 "),e("i",{staticClass:"fa fa-arrow-circle-right",attrs:{"aria-hidden":"true"}})])],1)])})),0)]),e("div",{staticClass:"sm"},[e("table",{staticClass:"table table-striped table-bordered text-dark my-2"},[t._m(2),e("tbody",t._l(t.products,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm mr-2",attrs:{type:"button"},on:{click:function(e){return t.removeLike(a.id)}}},[e("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]),e("button",{staticClass:"btn-outline-dark btn-sm btn",attrs:{type:"button"},on:{click:function(e){return t.addCart(a.id)}}},[e("i",{staticClass:"fa fa-shopping-basket",attrs:{"aria-hidden":"true"}})])]),e("td",{staticClass:"align-middle"},[e("router-link",{staticClass:"text-muted",attrs:{to:"/product/"+a.id}},[t._v(" "+t._s(a.title)+" ")]),e("i",{staticClass:"fa ml-2 text-muted fa-arrow-circle-right",attrs:{"aria-hidden":"true"}})],1)])})),0)])]),e("button",{staticClass:"btn btn-dark my-3",on:{click:function(a){return t.addCart(t.products)}}},[t._v(" 全部加入購物車 ")])])],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h3",{staticClass:"my-4 text-dark"},[e("i",{staticClass:"fa fa-heart-o",attrs:{"aria-hidden":"true"}}),t._v(" 喜好項目 ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"thead"},[e("th",[t._v("操作")]),e("th",[t._v("品名")]),e("th",[t._v("單價")]),e("th",[t._v("商品連結")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"thead"},[e("th",[t._v("操作")]),e("th",[t._v("瀏覽商品")])])}],n=(e("99af"),e("4de4"),e("7db0"),e("4160"),e("c975"),e("a434"),e("d3b7"),e("ac1f"),e("25f0"),e("1276"),e("498a"),e("159b"),{data:function(){return{products:[],isLoading:!1,hasLiked:!0,cookie:"",time:0}},methods:{getLikes:function(t){var a=this;a.isLoading=!0;var e="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/products/all");a.$http.get(e).then((function(e){e.data.success?(a.products=e.data.products,a.hasLiked=!0,t=t.length>20?t.split(","):[t],a.isLoading=!1,a.products=a.products.filter((function(a){return-1!==t.indexOf(a.id)}))):a.$bus.$emit("message:push",e.data.message,"danger")}))},removeLike:function(t){var a=this;a.isLoading=!0;var e=a.cookie;if(20===e.length)document.cookie="like=;expires=7;path=/";else if(e.length>20){e=e.split(",");var i=e.indexOf(t);e.splice(i,1);var s=e.toString();document.cookie="like=".concat(s,";expires=7;path=/")}a.isLoading=!1,a.hasLikes()},hasLikes:function(){for(var t,a=this,e=document.cookie.split(";"),i=0;i<e.length;++i)t=e[i].trim(),t=t.split("="),"like"===t[0]&&(a.cookie=t[1]);a.cookie&&a.cookie.length>0?(a.getLikes(a.cookie),a.getCart()):(a.hasLiked=!1,a.time=3,setInterval(a.countDown,1e3))},addCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this;if("string"===typeof t){var i,s=e.cart.find((function(a){return a.product_id===t}));if(s){i={product_id:s.product_id,qty:a+s.qty},e.isLoading=!0;var n="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");e.$http.post(n,{data:i}).then((function(t){e.isLoading=!1,t.data.success?e.delCart(s.id,!0):e.$bus.$emit("message:push",t.data.message,"danger")}))}else{i={product_id:t,qty:a},e.isLoading=!0;var r="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");e.$http.post(r,{data:i}).then((function(t){e.isLoading=!1,t.data.success?(e.getCart(),e.$bus.$emit("message:push",t.data.message,"dark")):e.$bus.$emit("message:push",t.data.message,"danger")}))}}else t.forEach((function(t){var i,s=e.cart.find((function(a){return a.product_id===t.id}));if(s){i={product_id:s.product_id,qty:a+s.qty},e.isLoading=!0;var n="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");e.$http.post(n,{data:i}).then((function(t){e.isLoading=!1,t.data.success?e.delCart(s.id,!0):e.$bus.$emit("message:push",t.data.message,"danger")}))}else{i={product_id:t.id,qty:1},e.isLoading=!0;var r="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");e.$http.post(r,{data:i}).then((function(t){e.isLoading=!1,t.data.success?(e.getCart(),e.$bus.$emit("message:push",t.data.message,"dark")):e.$bus.$emit("message:push",t.data.message,"danger")}))}}))},delCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=this;e.isLoading=!0;var i="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart/").concat(t);e.$http.delete(i).then((function(t){t.data.success?!1===a?e.$bus.$emit("message:push",t.data.message,"dark"):e.$bus.$emit("message:push","購物車清單已更新","dark"):e.$bus.$emit("message:push",t.data.message,"danger"),e.isLoading=!1,e.getCart()}))},getCart:function(){var t=this;t.isLoading=!0;var a="".concat("https://vue-course-api.hexschool.io/","api/").concat("wangxuan","/cart");t.$http.get(a).then((function(a){a.data.success?t.cart=a.data.data.carts:t.$bus.$emit("message:push",a.data.message,"danger"),t.isLoading=!1}))},countDown:function(){this.time--}},watch:{time:function(t){0===t&&this.$router.push("/products/all")}},created:function(){this.hasLikes()}}),r=n,c=e("2877"),o=Object(c["a"])(r,i,s,!1,null,null,null);a["default"]=o.exports},c8d2:function(t,a,e){var i=e("d039"),s=e("5899"),n="​᠎";t.exports=function(t){return i((function(){return!!s[t]()||n[t]()!=n||s[t].name!==t}))}},c975:function(t,a,e){"use strict";var i=e("23e7"),s=e("4d64").indexOf,n=e("a640"),r=e("ae40"),c=[].indexOf,o=!!c&&1/[1].indexOf(1,-0)<0,d=n("indexOf"),u=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:o||!d||!u},{indexOf:function(t){return o?c.apply(this,arguments)||0:s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-15bc8c99.320a2101.js.map