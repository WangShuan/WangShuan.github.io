(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a9f2"],{bbfb:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{key:t.dataKey},[r("div",{staticClass:"navbar"},[r("div",{staticClass:"d-flex flex-wrap align-items-center"},[r("div",{staticClass:"navbar-title",on:{click:function(a){return a.stopPropagation(),t.$parent.leaveFolder()}}},[t._v(" 我的雲端硬碟 ")]),r("div",{staticClass:"navbar-title-arrow"}),t._l(t.folderLink,(function(a){return r("div",{key:a.fullPath,staticClass:"navbar-title-folderName",attrs:{role:"button"},on:{click:function(e){return e.target!==e.currentTarget?null:t.returnFolder(a)}}},[t._v(" "+t._s(a)+"/ ")])})),t.search?[r("div",{staticClass:"navbar-title-arrow"}),r("div",{staticClass:"navbar-title-folderName"},[t._v('"'+t._s(t.search)+'" 搜尋結果')])]:t._e()],2),r("div",{staticClass:"navbar-search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"navbar-search-input",attrs:{type:"text",placeholder:"搜尋您的檔案"},domProps:{value:t.search},on:{input:function(a){a.target.composing||(t.search=a.target.value)}}})])]),t.folder[0]?r("div",{staticClass:"w-100 title"},[t._v("資料夾")]):t._e(),r("transition",{attrs:{name:"fade"}},[t.folder[0]&&!t.filterRet?r("div",{staticClass:"row gutter-10"},t._l(t.folder,(function(a){return r("div",{key:a.fullPath,staticClass:"col-xl-3 col-lg-4 col-md-6 col-sm-12",class:{"d-none":a.isTrash}},[r("div",{staticClass:"folder",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.$router.push(t.folderName.replace(/\//g,"~")+"~"+a.name)}}},[r("div",{staticClass:"folder-btnGroup"},[r("div",{staticClass:"folder-btn",on:{click:function(e){return e.stopPropagation(),t.toggleStarFolder(a)}}},[a.isStar?r("img",{attrs:{src:e("5925"),alt:"標記星號"}}):r("img",{attrs:{src:e("8a7e"),alt:"標記星號"}})]),r("div",{staticClass:"dropdown"},[r("div",{staticClass:"folder-btn",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[r("img",{attrs:{src:e("b68c"),alt:"選單"}})]),r("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("共享")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$parent.clickDownloadFolder(a)}}},[t._v("下載")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openReNameModal(a)}}},[t._v("重新命名")]),r("a",{staticClass:"dropdown-item border-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.clickTrashFolder(a)}}},[t._v("移至垃圾桶")])])])]),r("span",{staticClass:"text-truncate d-inline-block px-2 w-100"},[t._v(t._s(a.fakeName))])])])})),0):t._e()]),r("transition",{attrs:{name:"fade"}},[t.filterRet?r("div",{staticClass:"row gutter-10"},t._l(t.filterRet.folders,(function(a){return r("div",{key:a.fullPath,staticClass:"col-xl-3 col-lg-4 col-md-6 col-sm-12",class:{"d-none":a.isTrash}},[r("div",{staticClass:"folder",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.$router.push(t.folderName.replace(/\//g,"~")+"~"+a.name)}}},[r("div",{staticClass:"folder-btnGroup"},[r("div",{staticClass:"folder-btn",on:{click:function(e){return e.stopPropagation(),t.toggleStarFolder(a)}}},[a.isStar?r("img",{attrs:{src:e("5925"),alt:"標記星號"}}):r("img",{attrs:{src:e("8a7e"),alt:"標記星號"}})]),r("div",{staticClass:"dropdown"},[r("div",{staticClass:"folder-btn",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[r("img",{attrs:{src:e("b68c"),alt:"選單"}})]),r("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("共享")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$parent.clickDownloadFolder(a)}}},[t._v("下載")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openReNameModal(a)}}},[t._v("重新命名")]),r("a",{staticClass:"dropdown-item border-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.clickTrashFolder(a)}}},[t._v("移至垃圾桶")])])])]),r("span",{staticClass:"text-truncate d-inline-block px-2 w-100"},[t._v(t._s(a.fakeName))])])])})),0):t._e()]),r("div",{staticClass:"w-100 title"},[t._v("檔案")]),r("transition",{attrs:{name:"fade"}},[t.file[0]&&!t.filterRet?r("div",{staticClass:"row gutter-10"},t._l(t.file,(function(a){return r("div",{key:a.fullPath,staticClass:"col-xl-3 col-lg-4 col-md-6 col-sm-12",class:{"d-none":a.isTrash}},[r("div",{staticClass:"file"},[r("div",{staticClass:"file-btnGroup"},[r("div",{staticClass:"file-btn",on:{click:function(e){return e.stopPropagation(),t.toggleStarFile(a)}}},[a.isStar?r("img",{attrs:{src:e("5925"),alt:"標記星號"}}):r("img",{attrs:{src:e("8a7e"),alt:"標記星號"}})]),r("div",{staticClass:"dropdown"},[r("div",{staticClass:"file-btn",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[r("img",{attrs:{src:e("b68c"),alt:"選單"}})]),r("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("共享")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$parent.clickDownload(a.name)}}},[t._v(" 下載 ")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openReNameModal(a)}}},[t._v("重新命名")]),r("a",{staticClass:"dropdown-item border-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.clickTrash(a)}}},[t._v(" 移至垃圾桶 ")])])])]),r("img",{staticClass:"file-img",attrs:{src:a.imgUrl,alt:""}}),r("span",{staticClass:"text-truncate d-inline-block px-2 w-100"},[t._v(t._s(a.fakeName))])])])})),0):t._e()]),r("transition",{attrs:{name:"fade"}},[t.filterRet.files?r("div",{staticClass:"row gutter-10"},t._l(t.filterRet.files,(function(a){return r("div",{key:a.fullPath,staticClass:"col-xl-3 col-lg-4 col-md-6 col-sm-12",class:{"d-none":a.isTrash}},[r("div",{staticClass:"file"},[r("div",{staticClass:"file-btnGroup"},[r("div",{staticClass:"file-btn",on:{click:function(e){return e.stopPropagation(),t.toggleStarFile(a)}}},[a.isStar?r("img",{attrs:{src:e("5925"),alt:"標記星號"}}):r("img",{attrs:{src:e("8a7e"),alt:"標記星號"}})]),r("div",{staticClass:"dropdown"},[r("div",{staticClass:"file-btn",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[r("img",{attrs:{src:e("b68c"),alt:"選單"}})]),r("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("共享")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$parent.clickDownload(a.name)}}},[t._v(" 下載 ")]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openReNameModal(a)}}},[t._v("重新命名")]),r("a",{staticClass:"dropdown-item border-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.clickTrash(a)}}},[t._v(" 移至垃圾桶 ")])])])]),r("img",{staticClass:"file-img",attrs:{src:a.imgUrl,alt:""}}),r("span",{staticClass:"text-truncate d-inline-block px-2 w-100"},[t._v(t._s(a.fakeName))])])])})),0):t._e()]),r("ReName",{attrs:{item:t.item,oldName:t.oldName}})],1)},s=[],i=(e("ac1f"),e("1276"),e("841c"),e("159b"),e("b0c0"),e("5319"),e("466d"),e("c740"),e("a630"),e("3ca3"),e("a434"),e("d3b7"),e("25f0"),e("260b")),n=(e("588e"),e("1157")),l=e.n(n),o=e("10c8"),c={data:function(){return{folderName:"",folder:[],file:[],search:"",item:{},oldName:"",dataKey:0}},components:{ReName:o["a"]},computed:{folderLink:function(){return this.folderName.split("/")},filterRet:function(){var t=this;if(this.search||this.$parent.search){var a={files:[],folders:[]};return this.folder.forEach((function(e){-1!==e.name.indexOf(t.search||t.$parent.search)&&a.folders.push(e)})),this.file.forEach((function(e){-1!==e.name.indexOf(t.search||t.$parent.search)&&a.files.push(e)})),a}return!1}},methods:{getData:function(){var t=this;t.folderName=t.$route.params.folderName,-1!==t.folderName.indexOf("~")&&(t.folderName=t.folderName.replace(/~/g,"/"));var a=i["a"].storage().ref(t.folderName);t.file=[],t.folder=[],a.listAll().then((function(a){a.prefixes.forEach((function(a){t.folder.push({name:a.name,fullPath:a.fullPath,isStar:!1,fakeName:a.name,isTrash:!1})})),t.folder.forEach((function(a){t.$parent.starFolder.forEach((function(t){t.fullPath==a.fullPath&&(a.isStar=!0,a.fakeName=t.fakeName)})),t.$parent.trashFolder.forEach((function(t){t.fullPath==a.fullPath&&(a.isTrash=!0)}))})),a.items.forEach((function(a){var e=i["a"].storage().ref(a.fullPath);e.getDownloadURL().then((function(e){if(a.name.match(/\.(jpeg|jpg|gif|png|ico|svg)$/))t.file.push({name:a.name,fakeName:a.name,imgUrl:e,isStar:!1,fullPath:a.fullPath,isTrash:!1});else{var r=a.name.split(".");t.file.push({name:a.name,fakeName:a.name,isStar:!1,imgUrl:"https://fakeimg.pl/260x180/?text=".concat(r[r.length-1]),fullPath:a.fullPath,isTrash:!1})}t.file.forEach((function(a){t.$parent.starFile.forEach((function(t){t.fullPath==a.fullPath&&(a.isStar=!0,a.fakeName=t.fakeName)})),t.$parent.trashFile.forEach((function(t){t.fullPath==a.fullPath&&(a.isTrash=!0)}))}))}))}))}))},returnFolder:function(t){var a=this,e=a.folderLink.findIndex((function(a){return a==t}));if(e!=a.folderLink.length-1){var r=Array.from(a.folderLink);r.splice(e+1,a.folderLink.length-1),r=r.toString().replace(/,/g,"/"),a.$parent.enterFolder(r)}},openReNameModal:function(t){l()("#rename-modal").modal("show"),this.item=t,this.oldName=t.fakeName},toggleStarFolder:function(t){t.isStar=!t.isStar,this.dataKey+=1;var a=t.name;if(t.name=t.fullPath,t.isStar)this.$parent.starFolder.push(t),t.name=a;else{var e=this.$parent.starFolder.findIndex((function(a){return a==t}));this.$parent.starFolder.splice(e,1),t.name=a}},toggleStarFile:function(t){if(t.isStar=!t.isStar,this.dataKey+=1,t.name=t.fullPath,t.isStar)this.$parent.starFile.push(t);else{var a=this.$parent.starFile.findIndex((function(a){return a==t}));this.$parent.starFile.splice(a,1)}},clickTrash:function(t){confirm("是否要將 "+t.name+" 移至垃圾桶？")&&(t.isTrash=!0,this.$parent.trashFile.push(t),this.$parent.starFile.forEach((function(a){a.fullPath==t.fullPath&&(a.isTrash=!0)})),this.dataKey+=1)},clickTrashFolder:function(t){confirm("是否要將 "+t.name+" 移至垃圾桶？")&&(t.isTrash=!0,this.$parent.trashFolder.push(t),this.$parent.starFolder.forEach((function(a){a.fullPath==t.fullPath&&(a.isTrash=!0)})),this.dataKey+=1)}},created:function(){this.getData()}},d=c,f=e("2877"),u=Object(f["a"])(d,r,s,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d21a9f2.d78d4acf.js.map